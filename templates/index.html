<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Classic AI News Recommender</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-dark bg-dark p-3">
    <div class="container-fluid d-flex justify-content-between align-items-center">
      <span class="navbar-brand text-light">ðŸ§  Smart AI News</span>
      <div>
        <span class="text-light me-3">Welcome, <strong>{{ username }}</strong></span>
        <a href="{{ url_for('history') }}" class="btn btn-outline-light btn-sm me-2">Reading History</a>
        <a href="{{ url_for('logout') }}" class="btn btn-danger btn-sm">Logout</a>
      </div>
    </div>
  </nav>

  <!-- Category Buttons -->
 <div class="bg-light text-center py-2 shadow-sm">
  <a href="/?category=technology"
     class="btn btn-sm mx-1 {% if selected_category == 'technology' %}btn-primary text-white{% else %}btn-outline-primary{% endif %}">
     Technology
  </a>
  <a href="/?category=business"
     class="btn btn-sm mx-1 {% if selected_category == 'business' %}btn-primary text-white{% else %}btn-outline-primary{% endif %}">
     Business
  </a>
  <a href="/?category=sports"
     class="btn btn-sm mx-1 {% if selected_category == 'sports' %}btn-primary text-white{% else %}btn-outline-primary{% endif %}">
     Sports
  </a>
  <a href="/?category=health"
     class="btn btn-sm mx-1 {% if selected_category == 'health' %}btn-primary text-white{% else %}btn-outline-primary{% endif %}">
     Health
  </a>
  <a href="/?category=science"
     class="btn btn-sm mx-1 {% if selected_category == 'science' %}btn-primary text-white{% else %}btn-outline-primary{% endif %}">
     Science
  </a>
  <a href="/"
     class="btn btn-sm mx-1 {% if not selected_category %}btn-dark text-white{% else %}btn-outline-dark{% endif %}">
     All
  </a>
</div>


  <div class="container mt-4">
    <!-- Category Sections -->
    {% for cat, articles in category_data.items() %}
      <h3 class="mt-4 text-capitalize">{{ cat }} News</h3>
      <div class="row mt-3">
        {% for article in articles[:6] %}
        <div class="col-md-4 mb-4">
          <div class="card h-100 shadow-sm border-0">
            <img src="{{ article.image or 'https://via.placeholder.com/300x200' }}" class="card-img-top" alt="news image">
            <div class="card-body d-flex flex-column">
              <h5 class="card-title">{{ article.title }}</h5>
              <p class="card-text text-muted">{{ article.description or 'No description available' }}</p>
              <div class="mt-auto">
                <a href="{{ url_for('read_article', title=article.title) }}" class="btn btn-primary btn-sm">Read More</a>
                <a href="{{ url_for('ai_recommend', title=article.title) }}" class="btn btn-outline-success btn-sm ms-2">AI Recommend</a>
              </div>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    {% endfor %}

    <hr>

    <!-- User Interest Recommendations -->
    <h3>ðŸ’¡ Recommended For You</h3>
    <p class="text-muted">Based on your interests: {{ rec_categories | join(', ') }}</p>
    <div class="row mt-3">
      {% for article in recommended[:6] %}
      <div class="col-md-4 mb-4">
        <div class="card h-100 border-info shadow-sm">
          <img src="{{ article.image or 'https://via.placeholder.com/300x200' }}" class="card-img-top">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">{{ article.title }}</h5>
            <p class="card-text">{{ article.description or 'No description available' }}</p>
            <a href="{{ article.url }}" class="btn btn-outline-info btn-sm mt-auto" target="_blank">Read More</a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

    <hr>

    <!-- AI Personalized Feed -->
    <h3>ðŸ§  AI Personalized For You (Based on Reading History)</h3>
    {% if personalized %}
      <div class="row mt-3">
        {% for article in personalized %}
        <div class="col-md-4 mb-4">
          <div class="card h-100 border-warning shadow-sm">
            <img src="{{ article.image or 'https://via.placeholder.com/300x200' }}" class="card-img-top" alt="news image">
            <div class="card-body d-flex flex-column">
              <h5 class="card-title">{{ article.title }}</h5>
              <p class="card-text">{{ article.description or 'No description available' }}</p>
              <a href="{{ url_for('read_article', title=article.title) }}" class="btn btn-warning btn-sm mt-auto">Read More</a>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    {% else %}
      <p>No personalized recommendations yet â€” start reading some articles!</p>
    {% endif %}
  </div>

  <footer class="bg-dark text-center text-light py-3 mt-4">
    <small>Â© 2025 Smart AI News â€” Powered by Machine Learning</small>
  </footer>
</body>
</html>
